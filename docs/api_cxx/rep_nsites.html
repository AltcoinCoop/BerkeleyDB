<!--$Id: rep_nsites.so,v 1.1 2006/03/15 19:39:22 bostic Exp $-->
<!--Copyright 1997-2006 by Sleepycat Software, Inc.-->
<!--All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB: DbEnv::rep_set_nsites</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,Java,C,C++">
</head>
<body bgcolor=white>
<table width="100%"><tr valign=top>
<td>
<h3>DbEnv::rep_set_nsites</h3>
</td>
<td align=right>
<a href="../api_cxx/api_core.html"><img src="../images/api.gif" alt="API"></a>
<a href="../ref/toc.html"><img src="../images/ref.gif" alt="Ref"></a></td>
</tr></table>
<hr size=1 noshade>
<tt>
<h3><pre>
#include &lt;db_cxx.h&gt;
<p>
int
DbEnv::rep_set_nsites(int nsites);
<p>
int
DbEnv::rep_get_nsites(int *nsitesp);
</pre></h3>
<hr size=1 noshade>
<h3>Description: DbEnv::rep_set_nsites</h3>
<p>The DbEnv::rep_set_nsites method specifies the number of replication sites
expected to participate in an election.  Once the current site has
election information from that many sites, it will short-circuit the
election and immediately cast its vote for a new master.</p>
<p>The DbEnv::rep_set_nsites method is not called by most replication
applications.  It should only be called by applications implementing
their own network transport layer, explicitly holding replication group
elections and handling replication messages outside of the replication
manager framework.</p>
<p>We recommend <b>nsites</b> be set to:</p>
<blockquote><pre>sites participating in the election - 1</pre></blockquote>
<p>This allows replication groups to elect a new master immediately if the
current master fails.  Setting the <b>nsites</b> value to the number
of sites participating in the replication election ensures all sites in
the group get the chance to participate in the election, at the cost of
potentially slower elections.  Setting <b>nsites</b> to lower values
can increase the speed of an election, but can also result in election
failure, and is usually not recommended.</p>
<p>The DbEnv::rep_set_nsites method configures a database environment, not only operations
performed using the specified <a href="../api_cxx/env_class.html">DbEnv</a> handle.</p>
<p>The DbEnv::rep_set_nsites method may be called at any time during the life of the
application.</p>
<p>The DbEnv::rep_set_nsites method
either returns a non-zero error value
or throws an exception that encapsulates a non-zero error value on
failure, and returns 0 on success.
</p>
<h3>Parameters</h3>
<dl compact>
<dt><b>nsites</b><dd>A positive integer specifying the number of replication sites expected
to participate in an election.
</dl>
<hr size=1 noshade>
<h3>Description: DbEnv::rep_get_nsites</h3>
<p>The DbEnv::rep_get_nsites method returns the number of replication sites expected to participate in an election.</p>
<p>The DbEnv::rep_get_nsites method may be called at any time during the life of the
application.</p>
<p>The DbEnv::rep_get_nsites method
either returns a non-zero error value
or throws an exception that encapsulates a non-zero error value on
failure, and returns 0 on success.
</p>
<h3>Parameters</h3>
<dl compact>
<dt><b>nsitesp</b><dd>The DbEnv::rep_get_nsites method returns  the
number of replication sites expected to participate in an election in <b>nsitesp</b>.
</dl>
<hr size=1 noshade>
<h3>Class</h3>
<a href="../api_cxx/env_class.html">DbEnv</a>
<h3>See Also</h3>
<a href="../api_cxx/rep_list.html">Replication and Related Methods</a>
</tt>
<table width="100%"><tr><td><br></td><td align=right>
<a href="../api_cxx/api_core.html"><img src="../images/api.gif" alt="API"></a><a href="../ref/toc.html"><img src="../images/ref.gif" alt="Ref"></a>
</td></tr></table>
<p><font size=1><a href="../sleepycat/legal.html">Copyright (c) 1996-2006</a> <a href="http://www.sleepycat.com">Sleepycat Software, Inc.</a> - All rights reserved.</font>
</body>
</html>
